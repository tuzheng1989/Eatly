import{s,d as r}from"./index-C6H1Hdn7.js";class o{storage;constructor(){this.storage=s}async getAll(){return await this.storage.getAllRecords()}async getByDateRange(t,e){return t||(t=r().subtract(3,"month").format("YYYY-MM-DD")),e||(e=r().format("YYYY-MM-DD")),await this.storage.getRecordsByDateRange(t,e)}async getByDate(t){return await this.storage.getRecordByDate(t)}async create(t){if(!t.date||!/^\d{4}-\d{2}-\d{2}$/.test(t.date))throw new Error("无效的日期格式");if(await this.getByDate(t.date))throw new Error("该日期已有记录");return await this.storage.createRecord(t)}async update(t,e){return await this.storage.updateRecord(t,e)}async delete(t){await this.storage.deleteRecord(t)}async getRecent(t=7){const e=r().subtract(t,"day").format("YYYY-MM-DD"),a=r().format("YYYY-MM-DD");return await this.getByDateRange(e,a)}}const n=new o;export{n as r};
