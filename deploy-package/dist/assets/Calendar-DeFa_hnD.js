import{d as B,_ as I}from"./index-C6H1Hdn7.js";import{B as F,q as V,r as H,i as P}from"./ui-library-BNKiWr2G.js";import{k as g,L as r,M as l,N as t,O as u,R as d,P as k,Y as a,F as S,Z as j,c as R,H as Q,_ as b,$ as U,o as W,r as Y,j as f,Q as Z}from"./vue-vendor-Bi-VIAV2.js";import{u as G}from"./record-DshWbak5.js";import"./record.service-BTSfs8Wh.js";const J={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},K=g({name:"ChevronBack",render:function(m,o){return r(),l("svg",J,o[0]||(o[0]=[t("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"48",d:"M328 112L184 256l144 144"},null,-1)]))}}),X={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},ee=g({name:"ChevronForward",render:function(m,o){return r(),l("svg",X,o[0]||(o[0]=[t("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"48",d:"M184 112l144 144l-144 144"},null,-1)]))}}),te={class:"calendar-view"},ne={class:"calendar-header"},oe={class:"calendar-weekdays"},se={class:"calendar-days"},ae=["onClick"],re={class:"day-number"},le={key:0,class:"day-meals"},ce={class:"meal-item meal-a"},de={class:"meal-item meal-b"},ie={class:"meal-item meal-c"},ue=g({__name:"CalendarView",props:{currentDate:{},records:{}},emits:["date-click","month-change"],setup(D,{emit:m}){const o=D,v=m,w=["æ—¥","ä¸€","äºŒ","ä¸‰","å››","äº”","å…­"],_=R(()=>B(o.currentDate).format("YYYYå¹´MMæœˆ")),c=R(()=>{const e=o.currentDate.getFullYear(),h=o.currentDate.getMonth(),n=new Date(e,h,1),N=new Date(e,h+1,0),T=n.getDay(),A=N.getDate(),x=new Date,L=s=>s.getDate()===x.getDate()&&s.getMonth()===x.getMonth()&&s.getFullYear()===x.getFullYear(),y=[];for(let s=0;s<T;s++){const p=new Date(e,h,-T+s+1);y.push({date:p,hasRecord:!1,isCurrentMonth:!1,isToday:!1})}for(let s=1;s<=A;s++){const p=new Date(e,h,s),E=B(p).format("YYYY-MM-DD"),$=o.records.find(z=>z.date===E),O=!!$,q=L(p);y.push({date:p,hasRecord:O,isCurrentMonth:!0,isToday:q,record:$||void 0})}return y});function C(){const e=new Date(o.currentDate);e.setMonth(e.getMonth()-1),v("month-change",e)}function M(){const e=new Date(o.currentDate);e.setMonth(e.getMonth()+1),v("month-change",e)}function i(e){v("date-click",e)}return(e,h)=>(r(),l("div",te,[t("div",ne,[u(d(F),{text:"",onClick:C},{icon:k(()=>[u(d(V),null,{default:k(()=>[u(d(K))]),_:1})]),_:1}),t("h3",null,a(_.value),1),u(d(F),{text:"",onClick:M},{icon:k(()=>[u(d(V),null,{default:k(()=>[u(d(ee))]),_:1})]),_:1})]),t("div",oe,[(r(),l(S,null,j(w,n=>t("div",{key:n,class:"weekday"},a(n),1)),64))]),t("div",se,[(r(!0),l(S,null,j(c.value,n=>(r(),l("div",{key:n.date.getTime(),class:Q(["day-cell",{"has-record":n.hasRecord,"other-month":!n.isCurrentMonth,"is-today":n.isToday}]),onClick:N=>i(n.date)},[t("div",re,a(n.date.getDate()),1),n.hasRecord&&n.record?(r(),l("div",le,[t("div",ce,a(n.record.meals.A),1),t("div",de,a(n.record.meals.B),1),t("div",ie,a(n.record.meals.C),1)])):b("",!0)],10,ae))),128))])]))}}),he=I(ue,[["__scopeId","data-v-8d67599f"]]),me={class:"calendar"},ve={key:0},we={key:0},_e=g({__name:"Calendar",setup(D){const m=G(),{records:o}=U(m),v=Y(new Date),w=Y(!1),_=Y(null),c=R(()=>{if(!_.value)return null;const i=B(_.value).format("YYYY-MM-DD");return o.value.find(e=>e.date===i)});function C(i){_.value=i,w.value=!0}function M(i){v.value=i}return W(async()=>{await m.loadRecords()}),(i,e)=>(r(),l("div",me,[e[6]||(e[6]=t("h1",null,"æ—¥åŽ†è§†å›¾ ðŸ“…",-1)),u(he,{"current-date":v.value,records:d(o),onDateClick:C,onMonthChange:M},null,8,["current-date","records"]),u(d(H),{show:w.value,"onUpdate:show":e[0]||(e[0]=h=>w.value=h),preset:"card",title:"è®°å½•è¯¦æƒ…",style:{width:"600px"}},{default:k(()=>[c.value?(r(),l("div",ve,[t("p",null,[e[1]||(e[1]=t("strong",null,"æ—¥æœŸ:",-1)),f(" "+a(c.value.date),1)]),t("p",null,[e[2]||(e[2]=t("strong",null,"Aç»„:",-1)),f(" "+a(c.value.meals.A),1)]),t("p",null,[e[3]||(e[3]=t("strong",null,"Bç»„:",-1)),f(" "+a(c.value.meals.B),1)]),t("p",null,[e[4]||(e[4]=t("strong",null,"Cç»„:",-1)),f(" "+a(c.value.meals.C),1)]),c.value.note?(r(),l("p",we,[e[5]||(e[5]=t("strong",null,"å¤‡æ³¨:",-1)),f(" "+a(c.value.note),1)])):b("",!0)])):(r(),Z(d(P),{key:1,description:"è¯¥æ—¥æœŸæ— è®°å½•"}))]),_:1},8,["show"])]))}}),Ce=I(_e,[["__scopeId","data-v-48854b15"]]);export{Ce as default};
