import{k as M,i as k,w as h,L as f,Q as m,P as l,O as t,R as e,r as b,H as V,N as d,j as o,Y as y,_ as T,c as I,a0 as se,p as L,$ as ne,o as oe,M as J,F as ue,Z as ie}from"./vue-vendor-Bi-VIAV2.js";import{D as $,_ as E,u as Q}from"./index-C6H1Hdn7.js";import{d as H,g as W,k as re,x as de,o as w,c as z,h as D,y as G,j as x,z as Y,A as Z,C as K,D as U,E as pe,F,G as R,B,w as N,r as fe,H as j,I as ve,i as q,p as me,m as ce}from"./ui-library-BNKiWr2G.js";const ge=M({__name:"StepBasicInfo",setup(A,{expose:v}){const i=k("wizardData"),c=k("wizardUpdate"),n=b(),u=b({name:"",description:""}),r={name:[{required:!0,message:"ËØ∑ËæìÂÖ•ÊñπÊ°àÂêçÁß∞",trigger:"blur"},{min:2,max:20,message:"ÂêçÁß∞ÈïøÂ∫¶Â∫îÂú®2-20Â≠óÁ¨¶‰πãÈó¥",trigger:"blur"}]};h(()=>i.value,s=>{u.value.name=s.name,u.value.description=s.description||""},{immediate:!0});function _(){c({name:u.value.name,description:u.value.description})}async function g(){try{return await n.value?.validate(),!0}catch{return!1}}return v({validate:g}),(s,a)=>(f(),m(e(re),{ref_key:"formRef",ref:n,model:u.value,rules:r,"label-placement":"left","label-width":"80px"},{default:l(()=>[t(e(H),{label:"ÊñπÊ°àÂêçÁß∞",path:"name"},{default:l(()=>[t(e(W),{value:u.value.name,"onUpdate:value":a[0]||(a[0]=p=>u.value.name=p),placeholder:"ËØ∑ËæìÂÖ•ÊñπÊ°àÂêçÁß∞",onInput:_},null,8,["value"])]),_:1}),t(e(H),{label:"ÊñπÊ°àÊèèËø∞",path:"description"},{default:l(()=>[t(e(W),{value:u.value.description,"onUpdate:value":a[1]||(a[1]=p=>u.value.description=p),type:"textarea",placeholder:"ÂèØÈÄâÔºåÁÆÄÂçïÊèèËø∞Ê≠§ÊñπÊ°àÁöÑÁî®ÈÄî",rows:3,onInput:_},null,8,["value"])]),_:1})]),_:1},8,["model"]))}}),ye=M({__name:"StepConfigMode",setup(A,{expose:v}){const i=k("wizardData"),c=k("wizardUpdate"),n=b("template");h(()=>i.value.configMode,s=>{n.value=s},{immediate:!0});function u(){const s=n.value==="template"?JSON.parse(JSON.stringify($.pools)):{A:[],B:[],C:[]};c({configMode:n.value,pools:s})}function r(){n.value="template",u()}function _(){n.value="custom",u()}async function g(){return!0}return v({validate:g}),(s,a)=>(f(),m(e(w),{vertical:"",size:"large"},{default:l(()=>[t(e(de),{value:n.value,"onUpdate:value":[a[0]||(a[0]=p=>n.value=p),u]},{default:l(()=>[t(e(w),{vertical:""},{default:l(()=>[t(e(z),{hoverable:"",class:V(["mode-card",{selected:n.value==="template"}]),onClick:r},{header:l(()=>[t(e(w),{align:"center"},{default:l(()=>[t(e(G),{value:"template"}),a[2]||(a[2]=d("span",{class:"mode-title"},"‰ªéÊ®°ÊùøÂºÄÂßã",-1)),t(e(D),{type:"info",size:"small"},{default:l(()=>[...a[1]||(a[1]=[o("Êé®Ëçê",-1)])]),_:1})]),_:1})]),default:l(()=>[a[6]||(a[6]=d("p",null,"Âü∫‰∫éÈªòËÆ§ÊñπÊ°àÊ®°ÊùøÔºåÂø´ÈÄüÂàõÂª∫Ëá™ÂÆö‰πâÊñπÊ°à„ÄÇÈ¢ÑÁΩÆ‰∫ÜA/B/C‰∏âÁªÑÂ∏∏ËßÅËèúÂìÅ„ÄÇ",-1)),t(e(w),null,{default:l(()=>[t(e(D),{size:"small"},{default:l(()=>[...a[3]||(a[3]=[o("AÁªÑ: 10Áßç",-1)])]),_:1}),t(e(D),{size:"small"},{default:l(()=>[...a[4]||(a[4]=[o("BÁªÑ: 10Áßç",-1)])]),_:1}),t(e(D),{size:"small"},{default:l(()=>[...a[5]||(a[5]=[o("CÁªÑ: 12Áßç",-1)])]),_:1})]),_:1})]),_:1},8,["class"]),t(e(z),{hoverable:"",class:V(["mode-card",{selected:n.value==="custom"}]),onClick:_},{header:l(()=>[t(e(w),{align:"center"},{default:l(()=>[t(e(G),{value:"custom"}),a[7]||(a[7]=d("span",{class:"mode-title"},"‰ªéÈõ∂ÂºÄÂßã",-1))]),_:1})]),default:l(()=>[a[9]||(a[9]=d("p",null,"ÂÆåÂÖ®Ëá™ÂÆö‰πâËèúÂìÅÊ±†ÔºåÈúÄË¶ÅÊâãÂä®ËæìÂÖ•A/B/C‰∏âÁªÑÁöÑÊâÄÊúâËèúÂìÅ„ÄÇ",-1)),t(e(x),{type:"warning","show-icon":!1,style:{"margin-top":"0.5rem"}},{default:l(()=>[...a[8]||(a[8]=[o(" ÈúÄË¶ÅÁ°Æ‰øùÊØèÁªÑËá≥Â∞ëÂåÖÂê´1‰∏™ËèúÂìÅ ",-1)])]),_:1})]),_:1},8,["class"])]),_:1})]),_:1},8,["value"]),n.value==="template"?(f(),m(e(Y),{key:0},{default:l(()=>[t(e(Z),{title:"Êü•ÁúãÊ®°ÊùøËèúÂìÅËØ¶ÊÉÖ"},{default:l(()=>[t(e(K),{bordered:"",column:1},{default:l(()=>[t(e(U),{label:"AÁªÑÔºàÂè∂ËèúÁ±ªÔºâ"},{default:l(()=>[o(y(e($).pools.A.join("„ÄÅ")),1)]),_:1}),t(e(U),{label:"BÁªÑÔºàË±ÜÂà∂ÂìÅÔºâ"},{default:l(()=>[o(y(e($).pools.B.join("„ÄÅ")),1)]),_:1}),t(e(U),{label:"CÁªÑÔºàÁìúÊûúÁ±ªÔºâ"},{default:l(()=>[o(y(e($).pools.C.join("„ÄÅ")),1)]),_:1})]),_:1})]),_:1})]),_:1})):T("",!0)]),_:1}))}}),we=E(ye,[["__scopeId","data-v-f9fbd360"]]),Ce=M({__name:"StepPoolConfig",setup(A,{expose:v}){const i=k("wizardData"),c=k("wizardUpdate"),n=b({A:[],B:[],C:[]});h(()=>i.value.pools,g=>{n.value=JSON.parse(JSON.stringify(g))},{immediate:!0,deep:!0});const u=I(()=>n.value.A.length+n.value.B.length+n.value.C.length);function r(g,s){const a={...n.value,[g]:s};c({pools:a})}async function _(){return n.value.A.length===0||n.value.B.length===0||n.value.C.length===0?(window.$message?.error("ÊØèÁªÑËá≥Â∞ëÈúÄË¶ÅÂåÖÂê´1‰∏™ËèúÂìÅ"),!1):!0}return v({validate:_}),(g,s)=>(f(),m(e(w),{vertical:"",size:"large"},{default:l(()=>[t(e(pe),{type:"line",animated:""},{default:l(()=>[t(e(F),{name:"A",tab:"AÁªÑÔºàÂè∂ËèúÁ±ªÔºâ"},{default:l(()=>[t(e(R),{value:n.value.A,"onUpdate:value":[s[0]||(s[0]=a=>n.value.A=a),s[1]||(s[1]=a=>r("A",a))],placeholder:"ËØ∑ËæìÂÖ•ËèúÂìÅÂêçÁß∞"},{"create-button-default":l(()=>[t(e(B),{type:"primary",dashed:""},{default:l(()=>[...s[6]||(s[6]=[o("Ê∑ªÂä†ËèúÂìÅ",-1)])]),_:1})]),_:1},8,["value"]),t(e(x),{type:"info",style:{"margin-top":"1rem"}},{default:l(()=>[...s[7]||(s[7]=[o(" Â∏∏ËßÅÂè∂ËèúÁ±ªÔºöÂ§ßÁôΩËèú„ÄÅÊ≤πËèú„ÄÅËè†Ëèú„ÄÅÂ®ÉÂ®ÉËèúÁ≠â ",-1)])]),_:1})]),_:1}),t(e(F),{name:"B",tab:"BÁªÑÔºàË±ÜÂà∂ÂìÅÔºâ"},{default:l(()=>[t(e(R),{value:n.value.B,"onUpdate:value":[s[2]||(s[2]=a=>n.value.B=a),s[3]||(s[3]=a=>r("B",a))],placeholder:"ËØ∑ËæìÂÖ•ËèúÂìÅÂêçÁß∞"},{"create-button-default":l(()=>[t(e(B),{type:"primary",dashed:""},{default:l(()=>[...s[8]||(s[8]=[o("Ê∑ªÂä†ËèúÂìÅ",-1)])]),_:1})]),_:1},8,["value"]),t(e(x),{type:"info",style:{"margin-top":"1rem"}},{default:l(()=>[...s[9]||(s[9]=[o(" Â∏∏ËßÅË±ÜÂà∂ÂìÅÔºöË±ÜËÖê„ÄÅÈ¶ôÂπ≤„ÄÅËÖêÁ´π„ÄÅË±ÜÁöÆÁ≠â ",-1)])]),_:1})]),_:1}),t(e(F),{name:"C",tab:"CÁªÑÔºàÁìúÊûúÁ±ªÔºâ"},{default:l(()=>[t(e(R),{value:n.value.C,"onUpdate:value":[s[4]||(s[4]=a=>n.value.C=a),s[5]||(s[5]=a=>r("C",a))],placeholder:"ËØ∑ËæìÂÖ•ËèúÂìÅÂêçÁß∞"},{"create-button-default":l(()=>[t(e(B),{type:"primary",dashed:""},{default:l(()=>[...s[10]||(s[10]=[o("Ê∑ªÂä†ËèúÂìÅ",-1)])]),_:1})]),_:1},8,["value"]),t(e(x),{type:"info",style:{"margin-top":"1rem"}},{default:l(()=>[...s[11]||(s[11]=[o(" Â∏∏ËßÅÁìúÊûúÁ±ªÔºöÁï™ËåÑ„ÄÅÈªÑÁìú„ÄÅËåÑÂ≠ê„ÄÅÂúüË±ÜÁ≠â ",-1)])]),_:1})]),_:1})]),_:1}),t(e(z),{title:"ËèúÂìÅÁªüËÆ°",size:"small"},{default:l(()=>[t(e(w),null,{default:l(()=>[t(e(N),{label:"AÁªÑÊï∞Èáè",value:n.value.A.length},null,8,["value"]),t(e(N),{label:"BÁªÑÊï∞Èáè",value:n.value.B.length},null,8,["value"]),t(e(N),{label:"CÁªÑÊï∞Èáè",value:n.value.C.length},null,8,["value"]),t(e(N),{label:"ÊÄªËÆ°",value:u.value},null,8,["value"])]),_:1})]),_:1})]),_:1}))}}),_e=M({__name:"StepPreview",setup(A,{expose:v}){const i=k("wizardData"),c=I(()=>i.value.pools.A.length+i.value.pools.B.length+i.value.pools.C.length);async function n(){return!0}return v({validate:n}),(u,r)=>(f(),m(e(w),{vertical:"",size:"large"},{default:l(()=>[t(e(z),{title:"Âü∫Êú¨‰ø°ÊÅØ"},{default:l(()=>[t(e(K),{bordered:"",column:1},{default:l(()=>[t(e(U),{label:"ÊñπÊ°àÂêçÁß∞"},{default:l(()=>[o(y(e(i).name),1)]),_:1}),t(e(U),{label:"ÊñπÊ°àÊèèËø∞"},{default:l(()=>[o(y(e(i).description||"(Êó†)"),1)]),_:1}),t(e(U),{label:"ÈÖçÁΩÆÊ®°Âºè"},{default:l(()=>[t(e(D),{type:e(i).configMode==="template"?"info":"warning"},{default:l(()=>[o(y(e(i).configMode==="template"?"‰ªéÊ®°ÊùøÂºÄÂßã":"‰ªéÈõ∂ÂºÄÂßã"),1)]),_:1},8,["type"])]),_:1})]),_:1})]),_:1}),t(e(z),{title:"ËèúÂìÅÊ±†È¢ÑËßà"},{default:l(()=>[t(e(w),{vertical:""},{default:l(()=>[d("div",null,[r[0]||(r[0]=d("strong",null,"AÁªÑÔºàÂè∂ËèúÁ±ªÔºâ:",-1)),o(" "+y(e(i).pools.A.join("„ÄÅ")||"(Êó†)"),1)]),d("div",null,[r[1]||(r[1]=d("strong",null,"BÁªÑÔºàË±ÜÂà∂ÂìÅÔºâ:",-1)),o(" "+y(e(i).pools.B.join("„ÄÅ")||"(Êó†)"),1)]),d("div",null,[r[2]||(r[2]=d("strong",null,"CÁªÑÔºàÁìúÊûúÁ±ªÔºâ:",-1)),o(" "+y(e(i).pools.C.join("„ÄÅ")||"(Êó†)"),1)])]),_:1})]),_:1}),t(e(x),{type:"success","show-icon":!1},{default:l(()=>[t(e(N),{label:"ÊÄªËèúÂìÅÊï∞",value:c.value},null,8,["value"])]),_:1}),t(e(x),{type:"info"},{default:l(()=>[...r[3]||(r[3]=[o(' ËØ∑Á°ÆËÆ§‰ª•‰∏ä‰ø°ÊÅØÊó†ËØØÂêéÔºåÁÇπÂáª"ÂÆåÊàêÂàõÂª∫"ÊåâÈíÆ„ÄÇÊñπÊ°àÂàõÂª∫ÂêéÂèØÈöèÊó∂‰øÆÊîπËèúÂìÅÊ±†„ÄÇ ',-1)])]),_:1})]),_:1}))}}),Se={class:"wizard-content"},be=4,Be=M({__name:"SchemeWizard",props:{show:{type:Boolean}},emits:["update:show","success"],setup(A,{emit:v}){const i=A,c=v,n=Q(),u=b(1),r=b(!1),_=b(),g=b("process"),s=b({name:"",description:"",configMode:"template",pools:{A:[],B:[],C:[]}});L("wizardData",s),L("wizardUpdate",S=>{Object.assign(s.value,S)});const a=[ge,we,Ce,_e],p=I(()=>a[u.value-1]);async function P(){if(!await _.value?.validate()){g.value="error";return}g.value="process",u.value++}function X(){u.value>1&&(u.value--,g.value="process")}async function ee(){r.value=!0;try{const S=await n.createScheme({name:s.value.name,description:s.value.description,pools:s.value.pools,originalPools:s.value.pools});window.$message?.success("ÊñπÊ°àÂàõÂª∫ÊàêÂäü"),c("success",S),c("update:show",!1)}catch(S){window.$message?.error("ÂàõÂª∫Â§±Ë¥•: "+S.message)}finally{r.value=!1}}function le(){c("update:show",!1)}function te(){u.value=1,s.value={name:"",description:"",configMode:"template",pools:{A:[],B:[],C:[]}},g.value="process"}h(()=>i.show,S=>{S&&te()});const O=I({get:()=>i.show,set:S=>c("update:show",S)});return(S,C)=>(f(),m(e(fe),{show:O.value,"onUpdate:show":C[0]||(C[0]=ae=>O.value=ae),preset:"card",title:"ÂàõÂª∫Êñ∞ÊñπÊ°à",style:{width:"800px"}},{footer:l(()=>[t(e(w),{justify:"space-between"},{default:l(()=>[u.value>1?(f(),m(e(B),{key:0,disabled:r.value,onClick:X},{default:l(()=>[...C[1]||(C[1]=[o(" ‰∏ä‰∏ÄÊ≠• ",-1)])]),_:1},8,["disabled"])):T("",!0),C[5]||(C[5]=d("div",null,null,-1)),t(e(w),null,{default:l(()=>[t(e(B),{disabled:r.value,onClick:le},{default:l(()=>[...C[2]||(C[2]=[o(" ÂèñÊ∂à ",-1)])]),_:1},8,["disabled"]),u.value<be?(f(),m(e(B),{key:0,type:"primary",loading:r.value,onClick:P},{default:l(()=>[...C[3]||(C[3]=[o(" ‰∏ã‰∏ÄÊ≠• ",-1)])]),_:1},8,["loading"])):(f(),m(e(B),{key:1,type:"primary",loading:r.value,onClick:ee},{default:l(()=>[...C[4]||(C[4]=[o(" ÂÆåÊàêÂàõÂª∫ ",-1)])]),_:1},8,["loading"]))]),_:1})]),_:1})]),default:l(()=>[t(e(ve),{current:u.value,status:g.value},{default:l(()=>[t(e(j),{title:"Âü∫Êú¨‰ø°ÊÅØ"}),t(e(j),{title:"ÈÖçÁΩÆÊ®°Âºè"}),t(e(j),{title:"ËèúÂìÅÊ±†ÈÖçÁΩÆ"}),t(e(j),{title:"È¢ÑËßàÁ°ÆËÆ§"})]),_:1},8,["current","status"]),d("div",Se,[(f(),m(se(p.value),{ref_key:"stepRef",ref:_},null,512))])]),_:1},8,["show"]))}}),Ne=E(Be,[["__scopeId","data-v-394cd5ad"]]),ze={class:"schemes"},ke={class:"scheme-item"},Ae={class:"info"},De={class:"pool-details"},xe={class:"actions"},Ue=M({__name:"SchemeManage",setup(A){const v=Q(),{schemes:i,currentSchemeId:c,currentScheme:n}=ne(v),u=b(!1);async function r(s){v.setCurrentScheme(s),window.$message?.success("ÊñπÊ°àÂ∑≤ÂàáÊç¢")}async function _(s){await v.deleteScheme(s),window.$message?.success("ÊñπÊ°àÂ∑≤Âà†Èô§")}async function g(s){v.setCurrentScheme(s.id),window.$message?.success("ÊñπÊ°àÂ∑≤ÂàõÂª∫Âπ∂Ëá™Âä®ÂàáÊç¢")}return oe(async()=>{if(await v.loadSchemes(),i.value.length===0){const s=await v.createScheme($);v.setCurrentScheme(s.id)}else!c.value&&i.value.length>0?v.setCurrentScheme(i.value[0].id):c.value&&v.loadCurrentPools()}),(s,a)=>(f(),J("div",ze,[a[9]||(a[9]=d("h1",null,"ÊñπÊ°àÁÆ°ÁêÜ üîÑ",-1)),t(e(w),{vertical:"",size:"large"},{default:l(()=>[t(e(z),{title:"ÂΩìÂâçÊñπÊ°à"},{default:l(()=>[e(n)?(f(),m(e(w),{key:0},{default:l(()=>[t(e(N),{label:"ÊñπÊ°àÂêçÁß∞",value:e(n).name},null,8,["value"]),t(e(N),{label:"AÁªÑËèúÂìÅÊï∞",value:e(n).pools.A.length},null,8,["value"]),t(e(N),{label:"BÁªÑËèúÂìÅÊï∞",value:e(n).pools.B.length},null,8,["value"]),t(e(N),{label:"CÁªÑËèúÂìÅÊï∞",value:e(n).pools.C.length},null,8,["value"])]),_:1})):(f(),m(e(q),{key:1,description:"Êú™ÈÄâÊã©ÊñπÊ°à"}))]),_:1}),t(e(z),{title:"ÊâÄÊúâÊñπÊ°à"},{default:l(()=>[e(i).length>0?(f(),m(e(ce),{key:0},{default:l(()=>[(f(!0),J(ue,null,ie(e(i),p=>(f(),m(e(me),{key:p.id},{default:l(()=>[d("div",ke,[d("div",Ae,[d("h3",null,y(p.name),1),d("p",null,"A: "+y(p.pools.A.length)+" | B: "+y(p.pools.B.length)+" | C: "+y(p.pools.C.length),1),t(e(Y),{"arrow-placement":"right"},{default:l(()=>[t(e(Z),{title:"Êü•ÁúãËèúÂìÅËØ¶ÊÉÖ"},{default:l(()=>[d("div",De,[d("div",null,[a[2]||(a[2]=d("strong",null,"AÁªÑ:",-1)),o(" "+y(p.pools.A.join("„ÄÅ")||"(Êó†)"),1)]),d("div",null,[a[3]||(a[3]=d("strong",null,"BÁªÑ:",-1)),o(" "+y(p.pools.B.join("„ÄÅ")||"(Êó†)"),1)]),d("div",null,[a[4]||(a[4]=d("strong",null,"CÁªÑ:",-1)),o(" "+y(p.pools.C.join("„ÄÅ")||"(Êó†)"),1)])])]),_:2},1024)]),_:2},1024)]),d("div",xe,[e(c)!==p.id?(f(),m(e(B),{key:0,onClick:P=>r(p.id)},{default:l(()=>[...a[5]||(a[5]=[o(" ÈÄâÊã© ",-1)])]),_:1},8,["onClick"])):(f(),m(e(D),{key:1,type:"success"},{default:l(()=>[...a[6]||(a[6]=[o("ÂΩìÂâç",-1)])]),_:1})),p.isDefault?T("",!0):(f(),m(e(B),{key:2,type:"error",onClick:P=>_(p.id)},{default:l(()=>[...a[7]||(a[7]=[o(" Âà†Èô§ ",-1)])]),_:1},8,["onClick"]))])])]),_:2},1024))),128))]),_:1})):(f(),m(e(q),{key:1,description:"ÊöÇÊó†ÊñπÊ°à"}))]),_:1}),t(e(z),{title:"ÂàõÂª∫Êñ∞ÊñπÊ°à"},{default:l(()=>[t(e(w),null,{default:l(()=>[t(e(B),{type:"primary",onClick:a[0]||(a[0]=p=>u.value=!0)},{default:l(()=>[...a[8]||(a[8]=[o(" ÂàõÂª∫Êñ∞ÊñπÊ°à ",-1)])]),_:1})]),_:1})]),_:1})]),_:1}),t(Ne,{show:u.value,"onUpdate:show":a[1]||(a[1]=p=>u.value=p),onSuccess:g},null,8,["show"])]))}}),Ie=E(Ue,[["__scopeId","data-v-319672fe"]]);export{Ie as default};
