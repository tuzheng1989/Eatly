# CLAUDE.md

This file provides guidance to Claude Code (claude.ai/code) when working with code in this repository.

## é¡¹ç›®æ¦‚è¿°

**Eatly** - æ¯æ—¥é¥®é£Ÿæ¨èè®°å½•åº”ç”¨

ä¸€ä¸ªåŸºäº Vue 3 çš„ Web åº”ç”¨ï¼Œå¸®åŠ©ç”¨æˆ·é€šè¿‡ ABC ä¸‰ç»„èœå“æ± çš„éšæœºæ¨èæœºåˆ¶ï¼Œå®ç°å¥åº·å¤šæ ·çš„é¥®é£Ÿè§„åˆ’ã€‚

### æ ¸å¿ƒåŠŸèƒ½

- ğŸ² **éšæœºæ¨è**: ä» A/B/C ä¸‰ç»„èœå“æ± ä¸­éšæœºç”Ÿæˆæ¨èï¼ˆA: å¶èœç±», B: è±†åˆ¶å“ç±», C: ç“œæœç±»ï¼‰
- ğŸ“ **é¥®é£Ÿè®°å½•**: è®°å½•æ¯æ—¥å®é™…é¥®é£Ÿï¼Œæ”¯æŒæ‰‹åŠ¨ä¿®æ”¹æ¨èåç¡®è®¤
- ğŸ”„ **æ™ºèƒ½æ± å­ç®¡ç†**: è®°å½•åè‡ªåŠ¨ä»æ± ä¸­ç§»é™¤èœå“ï¼Œæ± ç©ºæ—¶è‡ªåŠ¨é‡ç½®
- ğŸ“… **æ—¥å†è§†å›¾**: é€šè¿‡æ—¥å†æŸ¥çœ‹å†å²é¥®é£Ÿè®°å½•
- ğŸ“Š **ç»Ÿè®¡åˆ†æ**: å¤šç»´åº¦é¥®é£Ÿæ•°æ®åˆ†æï¼Œæ”¯æŒæ—¥/å‘¨/æœˆç²’åº¦æŸ¥çœ‹è¶‹åŠ¿
- ğŸ—ƒï¸ **å¤šæ–¹æ¡ˆç®¡ç†**: æ”¯æŒåˆ›å»ºå’Œç®¡ç†å¤šå¥—èœè°±æ–¹æ¡ˆ
- ğŸ’¾ **æœ¬åœ°å­˜å‚¨**: ä½¿ç”¨ IndexedDB + LocalStorage åŒå±‚å­˜å‚¨ç­–ç•¥

### æŠ€æœ¯äº®ç‚¹

- **Composition API**: å…¨é¢ä½¿ç”¨ Vue 3 Composition API å’Œ `<script setup>` è¯­æ³•
- **TypeScript ä¸¥æ ¼æ¨¡å¼**: ç±»å‹å®‰å…¨ï¼Œæä¾›å®Œæ•´çš„ç±»å‹æ¨å¯¼
- **Pinia çŠ¶æ€ç®¡ç†**: Composition API é£æ ¼çš„çŠ¶æ€ç®¡ç†
- **Service å±‚æ¶æ„**: ä¸šåŠ¡é€»è¾‘ä¸æ•°æ®è®¿é—®åˆ†ç¦»
- **å“åº”å¼è®¾è®¡**: é€‚é…æ¡Œé¢å’Œç§»åŠ¨ç«¯

## å¼€å‘ç¯å¢ƒ

- **æ“ä½œç³»ç»Ÿ**: Windows 11
- **Shell**: Git Bash (MSYS2) - `/usr/bin/bash`
- **ç”¨æˆ·ç›®å½•**: `/c/Users/tuzhe`
- **è¯­è¨€åå¥½**: ä¸­æ–‡

## å‘½ä»¤è§„èŒƒ

- âœ… ä½¿ç”¨ Unix é£æ ¼å‘½ä»¤ï¼š`ls`, `grep`, `find`, `cat`
- âœ… ä½¿ç”¨æ­£æ–œæ è·¯å¾„ï¼š`/c/Users/tuzhe/runspace/eatly`
- âŒ é¿å…ä½¿ç”¨ PowerShell/CMD å‘½ä»¤
- âŒ é¿å…ä½¿ç”¨åæ–œæ è·¯å¾„

## å·¥å…·åå¥½

- **æ–‡ä»¶æ“ä½œ**: ä¼˜å…ˆä½¿ç”¨ Read/Edit/Write å·¥å…·ï¼Œè€Œé bash cat/sed
- **æœç´¢**: ä¼˜å…ˆä½¿ç”¨ Grep/Glob å·¥å…·ï¼Œè€Œé bash grep/find
- **å¤æ‚æœç´¢**: ä½¿ç”¨ Task tool + Explore agent
- **å¹¶è¡Œæ‰§è¡Œ**: å•æ¬¡å“åº”ä¸­è°ƒç”¨å¤šä¸ªç‹¬ç«‹å·¥å…·

## å¯ç”¨å·¥å…·

- Git, Node.js (npm/npx), Python 3.11, FFmpeg, Docker

## é¡¹ç›®ç»“æ„

```
eatly/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ assets/              # é™æ€èµ„æº
â”‚   â”‚   â”œâ”€â”€ images/          # å›¾ç‰‡èµ„æº
â”‚   â”‚   â””â”€â”€ styles/          # å…¨å±€æ ·å¼
â”‚   â”œâ”€â”€ components/          # Vue ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ common/          # é€šç”¨ç»„ä»¶ï¼ˆAppHeader, ConfirmDialogï¼‰
â”‚   â”‚   â”œâ”€â”€ recommendation/  # æ¨èç›¸å…³ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ record/          # è®°å½•ç›¸å…³ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ calendar/        # æ—¥å†ç»„ä»¶
â”‚   â”‚   â””â”€â”€ statistics/      # ç»Ÿè®¡å›¾è¡¨ç»„ä»¶
â”‚   â”œâ”€â”€ composables/         # ç»„åˆå¼å‡½æ•°
â”‚   â”œâ”€â”€ stores/              # Pinia çŠ¶æ€ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ app.ts           # åº”ç”¨å…¨å±€çŠ¶æ€
â”‚   â”‚   â”œâ”€â”€ scheme.ts        # æ–¹æ¡ˆçŠ¶æ€ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ record.ts        # è®°å½•çŠ¶æ€ç®¡ç†
â”‚   â”‚   â””â”€â”€ recommendation.ts # æ¨èçŠ¶æ€ç®¡ç†
â”‚   â”œâ”€â”€ services/            # ä¸šåŠ¡æœåŠ¡å±‚
â”‚   â”‚   â”œâ”€â”€ storage/         # æ•°æ®å­˜å‚¨æœåŠ¡
â”‚   â”‚   â”‚   â”œâ”€â”€ db.ts        # Dexie æ•°æ®åº“å®šä¹‰
â”‚   â”‚   â”‚   â””â”€â”€ storage.service.ts  # å­˜å‚¨ CRUD æœåŠ¡
â”‚   â”‚   â”œâ”€â”€ scheme.service.ts       # æ–¹æ¡ˆä¸šåŠ¡é€»è¾‘
â”‚   â”‚   â”œâ”€â”€ record.service.ts       # è®°å½•ä¸šåŠ¡é€»è¾‘
â”‚   â”‚   â”œâ”€â”€ recommend.service.ts    # æ¨èç®—æ³•
â”‚   â”‚   â””â”€â”€ stats.service.ts        # ç»Ÿè®¡åˆ†æ
â”‚   â”œâ”€â”€ types/               # TypeScript ç±»å‹å®šä¹‰
â”‚   â”œâ”€â”€ utils/               # å·¥å…·å‡½æ•°
â”‚   â”‚   â”œâ”€â”€ uuid.ts          # UUID ç”Ÿæˆ
â”‚   â”‚   â””â”€â”€ cache.ts         # LocalStorage ç¼“å­˜å·¥å…·
â”‚   â”œâ”€â”€ constants/           # å¸¸é‡å®šä¹‰
â”‚   â”‚   â””â”€â”€ default-scheme.ts # é»˜è®¤èœè°±æ–¹æ¡ˆ
â”‚   â”œâ”€â”€ views/               # é¡µé¢ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ Home.vue         # é¦–é¡µ
â”‚   â”‚   â”œâ”€â”€ Recommend.vue    # æ¨èé¡µé¢
â”‚   â”‚   â”œâ”€â”€ Record.vue       # è®°å½•é¡µé¢
â”‚   â”‚   â”œâ”€â”€ Calendar.vue     # æ—¥å†é¡µé¢
â”‚   â”‚   â”œâ”€â”€ Statistics.vue   # ç»Ÿè®¡é¡µé¢
â”‚   â”‚   â”œâ”€â”€ SchemeManage.vue # æ–¹æ¡ˆç®¡ç†é¡µé¢
â”‚   â”‚   â””â”€â”€ Settings.vue     # è®¾ç½®é¡µé¢
â”‚   â”œâ”€â”€ router/              # è·¯ç”±é…ç½®
â”‚   â”œâ”€â”€ App.vue              # æ ¹ç»„ä»¶
â”‚   â””â”€â”€ main.ts              # åº”ç”¨å…¥å£
â”œâ”€â”€ public/                  # å…¬å…±é™æ€èµ„æº
â”œâ”€â”€ tests/                   # æµ‹è¯•æ–‡ä»¶
â”‚   â”œâ”€â”€ unit/                # å•å…ƒæµ‹è¯•
â”‚   â””â”€â”€ e2e/                 # E2E æµ‹è¯•
â”œâ”€â”€ package.json             # é¡¹ç›®é…ç½®
â”œâ”€â”€ vite.config.ts           # Vite é…ç½®
â”œâ”€â”€ tsconfig.json            # TypeScript é…ç½®
â”œâ”€â”€ unocss.config.ts         # UnoCSS é…ç½®
â””â”€â”€ README.md                # é¡¹ç›®è¯´æ˜
```

## å¼€å‘å‘½ä»¤

### æ ¸å¿ƒå‘½ä»¤

```bash
# å¯åŠ¨å¼€å‘æœåŠ¡å™¨ï¼ˆé»˜è®¤ç«¯å£ 3000ï¼‰
npm run dev

# ç”Ÿäº§æ„å»º
npm run build

# é¢„è§ˆç”Ÿäº§æ„å»º
npm run preview

# ç±»å‹æ£€æŸ¥
npm run type-check

# ä»£ç æ£€æŸ¥
npm run lint

# ä»£ç æ ¼å¼åŒ–
npm run format
```

### ä¾èµ–ç®¡ç†

```bash
# å®‰è£…ä¾èµ–
npm install

# æ·»åŠ æ–°ä¾èµ–
npm install <package-name>

# æ·»åŠ å¼€å‘ä¾èµ–
npm install -D <package-name>
```

### æµ‹è¯•å‘½ä»¤ï¼ˆè®¡åˆ’ä¸­ï¼‰

```bash
# å•å…ƒæµ‹è¯•
npm run test:unit

# E2E æµ‹è¯•
npm run test:e2e

# æµ‹è¯•è¦†ç›–ç‡
npm run test:coverage
```

## æ¶æ„è¯´æ˜

### æŠ€æœ¯æ ˆ

| å±‚çº§ | æŠ€æœ¯ | ç”¨é€” |
|-----|------|-----|
| **å‰ç«¯æ¡†æ¶** | Vue 3.5 | æ¸è¿›å¼ JavaScript æ¡†æ¶ |
| **å¼€å‘è¯­è¨€** | TypeScript 5.6 | ç±»å‹å®‰å…¨çš„ JavaScript è¶…é›† |
| **æ„å»ºå·¥å…·** | Vite 6.0 | ä¸‹ä¸€ä»£å‰ç«¯æ„å»ºå·¥å…· |
| **UI ç»„ä»¶åº“** | Naive UI | Vue 3 ç»„ä»¶åº“ |
| **åŸå­åŒ– CSS** | UnoCSS | å³æ—¶åŸå­åŒ– CSS å¼•æ“ |
| **çŠ¶æ€ç®¡ç†** | Pinia 2.2 | Vue å®˜æ–¹çŠ¶æ€ç®¡ç†åº“ |
| **æ•°æ®å­˜å‚¨** | Dexie.js 4.0 | IndexedDB å°è£…åº“ |
| **æœ¬åœ°ç¼“å­˜** | LocalStorage | æ± å­çŠ¶æ€æŒä¹…åŒ– |
| **å›¾è¡¨åº“** | ECharts 5.5 | æ•°æ®å¯è§†åŒ– |
| **æ—¥æœŸå¤„ç†** | Day.js 1.11 | è½»é‡çº§æ—¥æœŸå¤„ç†åº“ |
| **è·¯ç”±** | Vue Router 4.5 | å®˜æ–¹è·¯ç”±ç®¡ç†å™¨ |
| **å·¥å…·åº“** | VueUse 11.3 | Vue Composition API å·¥å…·é›† |

### åˆ†å±‚æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          Views (é¡µé¢å±‚)                  â”‚
â”‚  Home, Recommend, Record, Calendar, etc  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      Components (ç»„ä»¶å±‚)                 â”‚
â”‚  RecommendForm, CalendarView, TrendChart â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚        Stores (çŠ¶æ€ç®¡ç†å±‚)               â”‚
â”‚   schemeStore, recordStore, recommendStore â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚       Services (ä¸šåŠ¡é€»è¾‘å±‚)              â”‚
â”‚  schemeService, recordService, etc.     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     Storage (æ•°æ®è®¿é—®å±‚)                 â”‚
â”‚   storageService (Dexie.js + IndexedDB) â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    Database (æ•°æ®åº“å±‚)                   â”‚
â”‚  IndexedDB (EatlyDB) + LocalStorage     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æ•°æ®æµè®¾è®¡

#### 1. æ¨èæµç¨‹

```
ç”¨æˆ·ç‚¹å‡»"ç”Ÿæˆæ¨è"
  â†“
recommendStore.generateRecommendations()
  â†“
recommendService.generate(pools, count)
  â”œâ”€ ä» currentPools éšæœºé€‰æ‹© A/B/C èœå“
  â”œâ”€ æ± å­ä¸ºç©ºæ—¶è‡ªåŠ¨é‡ç½®
  â””â”€ è¿”å› Recommendation[] æ•°ç»„
  â†“
æ˜¾ç¤ºæ¨èåˆ—è¡¨
  â†“
ç”¨æˆ·å¯ç¼–è¾‘æ¨èå†…å®¹
  â†“
ç”¨æˆ·ç‚¹å‡»"ç¡®è®¤"
  â†“
recommendStore.confirmRecommendation()
  â”œâ”€ recordService.createRecord() - åˆ›å»ºè®°å½•
  â”œâ”€ ä» currentPools ç§»é™¤å·²é€‰èœå“
  â””â”€ æ›´æ–° LocalStorage ç¼“å­˜
```

#### 2. æ± å­ç®¡ç†ç­–ç•¥

- **åŒå±‚å­˜å‚¨**:
  - `IndexedDB`: å­˜å‚¨å®Œæ•´çš„æ–¹æ¡ˆé…ç½®ï¼ˆpools + originalPoolsï¼‰
  - `LocalStorage`: å­˜å‚¨å½“å‰å·¥ä½œæ± å­çŠ¶æ€ï¼ˆcurrentPoolsï¼‰

- **è‡ªåŠ¨é‡ç½®æœºåˆ¶**:
  ```
  é€‰æ‹©èœå“æ—¶ä»æ± å­ç§»é™¤
    â†“
  æ± å­ä¸ºç©ºï¼Ÿ
    â”œâ”€ æ˜¯ â†’ è‡ªåŠ¨ä» originalPools é‡ç½®
    â””â”€ å¦ â†’ ç»§ç»­ä½¿ç”¨
  ```

- **æŒä¹…åŒ–æ—¶æœº**:
  - åˆ‡æ¢æ–¹æ¡ˆæ—¶ä¿å­˜ currentSchemeId
  - ä¿®æ”¹æ± å­æ—¶æ›´æ–° currentPools
  - ç¡®è®¤æ¨èååŒæ­¥æ›´æ–°

### æ ¸å¿ƒæ¨¡å—è¯´æ˜

#### 1. æ–¹æ¡ˆç®¡ç† (Scheme)

- **æ•°æ®ç»“æ„**: åŒ…å« pools å’Œ originalPools ä¸¤ä¸ªå­—æ®µ
- **pools**: å½“å‰å·¥ä½œæ± å­ï¼ˆä¼šéšæ¨èåŠ¨æ€å˜åŒ–ï¼‰
- **originalPools**: åŸå§‹æ± å­ï¼ˆç”¨äºé‡ç½®ï¼‰
- **é»˜è®¤æ–¹æ¡ˆ**: å†…ç½® DEFAULT_SCHEMEï¼ŒåŒ…å« 10+10+12 ä¸ªèœå“

#### 2. æ¨èç®—æ³• (Recommend)

```typescript
æ ¸å¿ƒé€»è¾‘ï¼š
1. å¤åˆ¶ pools åˆ° workingPoolsï¼ˆä¸å½±å“åŸæ± å­ï¼‰
2. å¾ªç¯ N æ¬¡ï¼ˆæ¨èæ•°é‡ï¼‰ï¼š
   - æ£€æŸ¥æ¯ä¸ªæ± å­æ˜¯å¦ä¸ºç©ºï¼Œä¸ºç©ºåˆ™ä» pools é‡ç½®
   - ä» workingPools éšæœºå„é€‰ä¸€ä¸ªèœå“
   - ä» workingPools ç§»é™¤å·²é€‰èœå“
   - ç”Ÿæˆ Recommendation å¯¹è±¡
3. è¿”å›æ¨èåˆ—è¡¨
```

#### 3. ç»Ÿè®¡åˆ†æ (Stats)

- **æ¦‚è§ˆç»Ÿè®¡**:
  - æ€»è®°å½•å¤©æ•°
  - å„ç»„èœå“æ€»æ•°
  - Top 5 çƒ­é—¨èœå“

- **é¢‘ç‡åˆ†æ**:
  - å„ç»„èœå“å‡ºç°é¢‘ç‡
  - å•ä¸ªèœå“å‡ºç°æ¬¡æ•°å’Œç™¾åˆ†æ¯”

- **è¶‹åŠ¿åˆ†æ**:
  - æ”¯æŒæ—¥/å‘¨/æœˆä¸‰ç§ç²’åº¦
  - é¥®é£Ÿæ‘„å…¥è¶‹åŠ¿å›¾
  - å¤šæ ·æ€§è¶‹åŠ¿å›¾

#### 4. æ—¥å†è§†å›¾ (Calendar)

- **æœˆä»½å¯¼èˆª**: æ”¯æŒä¸Šæœˆ/ä¸‹æœˆåˆ‡æ¢
- **æ—¥æœŸæ ‡è®°**: æœ‰è®°å½•çš„æ—¥æœŸé«˜äº®æ˜¾ç¤º
- **ç‚¹å‡»äº¤äº’**: ç‚¹å‡»æ—¥æœŸæŸ¥çœ‹è¯¦ç»†è®°å½•

### çŠ¶æ€ç®¡ç†ç­–ç•¥

#### Store è®¾è®¡åŸåˆ™

1. **Composition API é£æ ¼**: ä½¿ç”¨ `defineStore` + setup å‡½æ•°
2. **çŠ¶æ€æœ€å°åŒ–**: åªå­˜å‚¨å¿…è¦çš„çŠ¶æ€ï¼Œæ´¾ç”Ÿæ•°æ®ä½¿ç”¨ computed
3. **å¼‚æ­¥æ“ä½œ**: æ‰€æœ‰æ•°æ®åŠ è½½ã€åˆ›å»ºã€æ›´æ–°éƒ½æ˜¯å¼‚æ­¥å‡½æ•°
4. **é”™è¯¯å¤„ç†**: Store ä¸å¤„ç†é”™è¯¯ï¼Œç”±è°ƒç”¨æ–¹ï¼ˆç»„ä»¶ï¼‰å¤„ç†

#### Store é—´é€šä¿¡

```typescript
// confirmRecommendation ç¤ºä¾‹
async function confirmRecommendation(recId: string) {
  // 1. ä»å½“å‰ Store è·å–æ¨è
  const rec = recommendations.value.find(r => r.id === recId)

  // 2. è°ƒç”¨å…¶ä»– Service
  const record = await recordService.createRecord(...)

  // 3. æ›´æ–°å…¶ä»– Store
  const schemeStore = useSchemeStore()
  schemeStore.updateCurrentPool(...)
}
```

### å­˜å‚¨ç­–ç•¥

#### IndexedDB (EatlyDB)

- **schemes**: æ–¹æ¡ˆé…ç½®è¡¨
- **records**: é¥®é£Ÿè®°å½•è¡¨
- **recommendations**: æ¨èå†å²è¡¨ï¼ˆæš‚æœªä½¿ç”¨ï¼‰
- **settings**: åº”ç”¨è®¾ç½®è¡¨ï¼ˆæš‚æœªä½¿ç”¨ï¼‰

#### LocalStorage

- **currentSchemeId**: å½“å‰é€‰ä¸­çš„æ–¹æ¡ˆ ID
- **currentPools**: å½“å‰å·¥ä½œæ± å­çŠ¶æ€ï¼ˆå®æ—¶åŒæ­¥ï¼‰
- **settings**: åº”ç”¨è®¾ç½®ï¼ˆtheme, language, dateFormat ç­‰ï¼‰

### ç±»å‹ç³»ç»Ÿ

æ ¸å¿ƒç±»å‹å®šä¹‰åœ¨ `src/types/` ç›®å½•ï¼š

- **Scheme**: æ–¹æ¡ˆå®ä½“
- **Record**: è®°å½•å®ä½“
- **Recommendation**: æ¨èå®ä½“
- **Statistics**: ç»Ÿè®¡æ•°æ®
- **Settings**: åº”ç”¨è®¾ç½®

### æ€§èƒ½ä¼˜åŒ–

1. **ä»£ç åˆ†å‰²**: Vite è‡ªåŠ¨åˆ†å‰² vendor chunks
2. **æ‡’åŠ è½½**: è·¯ç”±ç»„ä»¶ä½¿ç”¨ `import()` åŠ¨æ€å¯¼å…¥
3. **computed ç¼“å­˜**: å¤§é‡ä½¿ç”¨ computed ç¼“å­˜æ´¾ç”Ÿæ•°æ®
4. **LocalStorage ç¼“å­˜**: å‡å°‘ IndexedDB æŸ¥è¯¢é¢‘ç‡

### æœªæ¥æ‰©å±•

1. **WeChat Mini Program**: è®¡åˆ’è¿ç§»åˆ°å¾®ä¿¡å°ç¨‹åº
2. **æ•°æ®å¯¼å‡º**: æ”¯æŒ JSON/CSV å¯¼å‡º
3. **æ•°æ®å¯¼å…¥**: æ”¯æŒä»å¤‡ä»½æ¢å¤
4. **äº‘ç«¯åŒæ­¥**: è€ƒè™‘æ·»åŠ äº‘åŒæ­¥åŠŸèƒ½
5. **å¤šè¯­è¨€æ”¯æŒ**: i18n å›½é™…åŒ–
6. **ä¸»é¢˜å®šåˆ¶**: æ·±è‰²æ¨¡å¼æ”¯æŒ

## å¼€å‘æŒ‡å—

### æ·»åŠ æ–°åŠŸèƒ½

1. **ç±»å‹å®šä¹‰**: åœ¨ `src/types/` æ·»åŠ  TypeScript ç±»å‹
2. **æœåŠ¡å±‚**: åœ¨ `src/services/` æ·»åŠ ä¸šåŠ¡é€»è¾‘
3. **çŠ¶æ€ç®¡ç†**: åœ¨ `src/stores/` æ·»åŠ  Pinia store
4. **UI ç»„ä»¶**: åœ¨ `src/components/` æ·»åŠ  Vue ç»„ä»¶
5. **é¡µé¢**: åœ¨ `src/views/` æ·»åŠ é¡µé¢ç»„ä»¶
6. **è·¯ç”±**: åœ¨ `src/router/index.ts` æ·»åŠ è·¯ç”±é…ç½®

### ä»£ç é£æ ¼

- **ç»„ä»¶å‘½å**: PascalCase (å¦‚ `RecommendForm.vue`)
- **æ–‡ä»¶å‘½å**:
  - ç»„ä»¶: PascalCase (`RecommendForm.vue`)
  - å·¥å…·: kebab-case (`uuid.ts`, `cache.ts`)
  - Store: kebab-case (`scheme.ts`, `record.ts`)
- **å˜é‡å‘½å**: camelCase (`currentScheme`, `loadRecords`)
- **å¸¸é‡å‘½å**: UPPER_SNAKE_CASE (`DEFAULT_SCHEME`)
- **ç±»å‹å‘½å**: PascalCase (`Scheme`, `Record`, `Recommendation`)

### ç»„ä»¶å¼€å‘è§„èŒƒ

```vue
<template>
  <!-- ä½¿ç”¨ç®€æ´çš„æ¨¡æ¿è¯­æ³• -->
  <div class="component-name">
    <slot />
  </div>
</template>

<script setup lang="ts">
// 1. å¯¼å…¥ä¾èµ–
import { ref, computed, onMounted } from 'vue'
import { useXxxStore } from '@/stores'

// 2. å®šä¹‰ Props
interface Props {
  foo: string
}
const props = defineProps<Props>()

// 3. å®šä¹‰ Emits
interface Emits {
  change: [value: string]
}
const emit = defineEmits<Emits>()

// 4. å“åº”å¼çŠ¶æ€
const count = ref(0)

// 5. è®¡ç®—å±æ€§
const double = computed(() => count.value * 2)

// 6. æ–¹æ³•
function increment() {
  count.value++
}

// 7. ç”Ÿå‘½å‘¨æœŸ
onMounted(() => {
  // åˆå§‹åŒ–é€»è¾‘
})
</script>

<style scoped>
/* ä½¿ç”¨ scoped é¿å…æ ·å¼æ±¡æŸ“ */
.component-name {
  /* æ ·å¼ */
}
</style>
```

### Store å¼€å‘è§„èŒƒ

```typescript
import { defineStore } from 'pinia'
import { ref, computed } from 'vue'

export const useXxxStore = defineStore('xxx', () => {
  // 1. çŠ¶æ€
  const items = ref<Item[]>([])

  // 2. è®¡ç®—å±æ€§
  const itemCount = computed(() => items.value.length)

  // 3. æ“ä½œ
  async function loadItems() {
    items.value = await xxxService.getAll()
  }

  function addItem(item: Item) {
    items.value.push(item)
  }

  // 4. è¿”å›å…¬å¼€ API
  return {
    items,
    itemCount,
    loadItems,
    addItem
  }
})
```

### æ³¨æ„äº‹é¡¹

1. **å…¨å±€ $message API**:
   - å·²åœ¨ `main.ts` å’Œ `App.vue` ä¸­é…ç½®
   - ä½¿ç”¨: `window.$message?.success('æ“ä½œæˆåŠŸ')`
   - ä½¿ç”¨å¯é€‰é“¾é¿å… TypeScript é”™è¯¯

2. **æ—¥æœŸå¤„ç†**:
   - ç»Ÿä¸€ä½¿ç”¨ `dayjs` å¤„ç†æ—¥æœŸ
   - æ•°æ®åº“å­˜å‚¨æ ¼å¼: `YYYY-MM-DD` (å¦‚ `2025-01-15`)
   - æ˜¾ç¤ºæ ¼å¼åŒ–: `dayjs(date).format('YYYYå¹´MMæœˆDDæ—¥')`

3. **UUID ç”Ÿæˆ**:
   - ä½¿ç”¨ `generateUUID()` å·¥å…·å‡½æ•°
   - ä½ç½®: `src/utils/uuid.ts`

4. **LocalStorage ç¼“å­˜**:
   - æ± å­çŠ¶æ€ç¼“å­˜é”®: `currentPools`
   - æ–¹æ¡ˆ ID ç¼“å­˜é”®: `currentSchemeId`
   - è®¾ç½®ç¼“å­˜é”®: `settings`

5. **é”™è¯¯å¤„ç†**:
   - Service å±‚æŠ›å‡ºé”™è¯¯
   - Store å±‚ä¸æ•è·é”™è¯¯
   - ç»„ä»¶å±‚ä½¿ç”¨ try-catch å¤„ç†é”™è¯¯å¹¶æ˜¾ç¤ºæç¤º

6. **ç±»å‹å®‰å…¨**:
   - é¿å…ä½¿ç”¨ `any` ç±»å‹
   - ä½¿ç”¨æ¥å£å®šä¹‰æ•°æ®ç»“æ„
   - ä½¿ç”¨ç±»å‹æ¨å¯¼å‡å°‘ç±»å‹æ³¨è§£

## å¸¸è§é—®é¢˜

### Q: ä¸ºä»€ä¹ˆæ¨èåæ± å­æ²¡å˜åŒ–ï¼Ÿ

A: ç¡®è®¤æ¨èæ‰ä¼šæ›´æ–°æ± å­ã€‚ç”Ÿæˆæ¨èåªæ˜¯é¢„è§ˆï¼Œåªæœ‰ç‚¹å‡»"ç¡®è®¤"æŒ‰é’®æ‰ä¼šï¼š
1. åˆ›å»ºé¥®é£Ÿè®°å½•
2. ä»æ± å­ç§»é™¤å·²é€‰èœå“
3. æ›´æ–° LocalStorage

### Q: å¦‚ä½•é‡ç½®æ± å­ï¼Ÿ

A: æœ‰ä¸¤ç§æ–¹å¼ï¼š
1. è‡ªåŠ¨é‡ç½®ï¼šæ± å­ä¸ºç©ºæ—¶è‡ªåŠ¨ä» `originalPools` é‡ç½®
2. æ‰‹åŠ¨é‡ç½®ï¼šåœ¨æ–¹æ¡ˆç®¡ç†é¡µé¢ç¼–è¾‘æ–¹æ¡ˆä¿å­˜åä¼šé‡ç½®

### Q: æ•°æ®å­˜å‚¨åœ¨å“ªé‡Œï¼Ÿ

A: ä½¿ç”¨åŒå±‚å­˜å‚¨ï¼š
- **IndexedDB**: æŒä¹…åŒ–å­˜å‚¨æ‰€æœ‰æ–¹æ¡ˆã€è®°å½•ã€è®¾ç½®ï¼ˆæ•°æ®åº“: EatlyDBï¼‰
- **LocalStorage**: ç¼“å­˜å½“å‰å·¥ä½œçŠ¶æ€ï¼ˆæ± å­ã€å½“å‰æ–¹æ¡ˆ IDï¼‰

### Q: å¦‚ä½•å¤‡ä»½æ•°æ®ï¼Ÿ

A: è®¡åˆ’ä¸­çš„åŠŸèƒ½ï¼Œå½“å‰å¯ä»¥é€šè¿‡ï¼š
1. æµè§ˆå™¨å¼€å‘è€…å·¥å…· â†’ Application â†’ IndexedDB â†’ EatlyDB
2. å¯¼å‡ºæ•°æ®åº“åˆ° JSON æ–‡ä»¶

### Q: å¼€å‘æœåŠ¡å™¨ç«¯å£å†²çªï¼Ÿ

A: Vite ä¼šè‡ªåŠ¨é€‰æ‹©å¯ç”¨ç«¯å£ï¼ˆé»˜è®¤ 3000ï¼‰ï¼Œå¦‚æœè¢«å ç”¨ä¼šå°è¯• 3001ã€3002...

## è°ƒè¯•æŠ€å·§

### 1. æŸ¥çœ‹ IndexedDB æ•°æ®

```javascript
// æµè§ˆå™¨æ§åˆ¶å°
import { db } from './src/services/storage/db'
const schemes = await db.schemes.toArray()
console.log(schemes)
```

### 2. æŸ¥çœ‹ LocalStorage

```javascript
// æµè§ˆå™¨æ§åˆ¶å°
console.log(localStorage.getItem('currentSchemeId'))
console.log(localStorage.getItem('currentPools'))
```

### 3. æŸ¥çœ‹å½“å‰ Store çŠ¶æ€

```vue
<script setup>
import { useSchemeStore } from '@/stores'
import { storeToRefs } from 'pinia'

const schemeStore = useSchemeStore()
const { currentPools, poolStatus } = storeToRefs(schemeStore)

// åœ¨æ¨¡æ¿ä¸­ç›´æ¥ä½¿ç”¨
// {{ poolStatus }}
</script>
```

## è´¡çŒ®æŒ‡å—

1. Fork é¡¹ç›®
2. åˆ›å»ºåŠŸèƒ½åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'feat: add some amazing feature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. å¼€å¯ Pull Request

### Commit è§„èŒƒ

éµå¾ª [Conventional Commits](https://www.conventionalcommits.org/) è§„èŒƒï¼š

- `feat`: æ–°åŠŸèƒ½
- `fix`: ä¿®å¤ Bug
- `refactor`: é‡æ„ä»£ç 
- `docs`: æ–‡æ¡£æ›´æ–°
- `style`: ä»£ç æ ¼å¼è°ƒæ•´ï¼ˆä¸å½±å“åŠŸèƒ½ï¼‰
- `test`: æµ‹è¯•ç›¸å…³
- `chore`: æ„å»º/å·¥å…·é“¾ç›¸å…³
- `perf`: æ€§èƒ½ä¼˜åŒ–

ç¤ºä¾‹ï¼š
```bash
feat: æ·»åŠ æ‰¹é‡æ¨èåŠŸèƒ½
fix: ä¿®å¤æ± å­é‡ç½®æ—¶æ•°æ®ä¸åŒæ­¥é—®é¢˜
docs: æ›´æ–° README å®‰è£…è¯´æ˜
```

## è®¸å¯è¯

MIT License - è¯¦è§ [LICENSE](LICENSE) æ–‡ä»¶
